[gd_scene load_steps=44 format=2]

[ext_resource path="res://Sets/BriefingRoom.png" type="Texture" id=1]
[ext_resource path="res://Character/Player.tscn" type="PackedScene" id=2]
[ext_resource path="res://BriefingRoom.gd" type="Script" id=3]
[ext_resource path="res://Assets/AllCharacters/Characters/EdMercer.png" type="Texture" id=4]
[ext_resource path="res://Src/NPC/NPC.tscn" type="PackedScene" id=5]
[ext_resource path="res://Assets/AllCharacters/Characters/Kelly.png" type="Texture" id=6]
[ext_resource path="res://Assets/AllCharacters/Characters/ClaireFinn.png" type="Texture" id=7]
[ext_resource path="res://Assets/AllCharacters/Characters/Bortus.png" type="Texture" id=8]
[ext_resource path="res://Assets/AllCharacters/Characters/TallaKeyali.png" type="Texture" id=9]
[ext_resource path="res://Assets/AllCharacters/Characters/GordonMalloy.png" type="Texture" id=10]
[ext_resource path="res://Assets/AllCharacters/Characters/JohnLammar.png" type="Texture" id=11]
[ext_resource path="res://Assets/Fonts/Squada_One/SquadaOne-Regular.ttf" type="DynamicFontData" id=12]
[ext_resource path="res://Src/DialogPlayer/DialogPlayer.tscn" type="PackedScene" id=13]
[ext_resource path="res://Src/NPC/NPC.gd" type="Script" id=14]
[ext_resource path="res://Assets/AllCharacters/Characters/Isaac.png" type="Texture" id=15]
[ext_resource path="res://Portal.gd" type="Script" id=16]
[ext_resource path="res://SitTrigger.tscn" type="PackedScene" id=31]

[sub_resource type="DynamicFont" id=1]
outline_size = 1
outline_color = Color( 0, 0, 0, 1 )
font_data = ExtResource( 12 )

[sub_resource type="Animation" id=2]
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 12 ]
}

[sub_resource type="Animation" id=3]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 0 ]
}

[sub_resource type="Animation" id=4]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 11 ]
}

[sub_resource type="Animation" id=5]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 6 ]
}

[sub_resource type="Animation" id=6]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 3 ]
}

[sub_resource type="Animation" id=7]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 1, 2 ]
}

[sub_resource type="Animation" id=8]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 10, 9 ]
}

[sub_resource type="Animation" id=9]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 7, 8 ]
}

[sub_resource type="Animation" id=10]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 4, 5 ]
}

[sub_resource type="RectangleShape2D" id=11]
extents = Vector2( 22.0422, 22.7589 )

[sub_resource type="RectangleShape2D" id=12]
extents = Vector2( 22.0422, 22.7589 )

[sub_resource type="DynamicFont" id=13]
outline_size = 1
outline_color = Color( 0, 0, 0, 1 )
font_data = ExtResource( 12 )

[sub_resource type="Animation" id=14]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 0 ]
}

[sub_resource type="Animation" id=15]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 11 ]
}

[sub_resource type="Animation" id=16]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 6 ]
}

[sub_resource type="Animation" id=17]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 3 ]
}

[sub_resource type="Animation" id=18]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 1, 2 ]
}

[sub_resource type="Animation" id=19]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 10, 9 ]
}

[sub_resource type="Animation" id=20]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 7, 8 ]
}

[sub_resource type="Animation" id=21]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 4, 5 ]
}

[sub_resource type="Animation" id=22]
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray(  ),
"transitions": PoolRealArray(  ),
"update": 1,
"values": [  ]
}

[sub_resource type="Animation" id=23]
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 12 ]
}

[sub_resource type="RectangleShape2D" id=24]
extents = Vector2( 7.09411, 4.31924 )

[sub_resource type="RectangleShape2D" id=25]
extents = Vector2( 22.0422, 22.7589 )

[sub_resource type="RectangleShape2D" id=26]
extents = Vector2( 5.2988, 16.3504 )

[node name="Node2D" type="Node2D"]
position = Vector2( -203.092, -134.237 )
script = ExtResource( 3 )

[node name="BriefingRoom" type="Sprite" parent="."]
position = Vector2( 462.3, 156.239 )
texture = ExtResource( 1 )

[node name="YSort" type="YSort" parent="."]

[node name="NPC2" parent="YSort" instance=ExtResource( 5 )]
position = Vector2( 507.895, 192.593 )
npc_name = "Kelly"
npc_texture = ExtResource( 6 )
trigger_talk = false
move_random = false
sitting = true

[node name="NPC3" parent="YSort" instance=ExtResource( 5 )]
position = Vector2( 478.854, 192.771 )
npc_name = "ClaireFinn"
npc_texture = ExtResource( 7 )
trigger_talk = false
move_random = false
sitting = true

[node name="NPC4" parent="YSort" instance=ExtResource( 5 )]
position = Vector2( 448.561, 195.089 )
npc_name = "Bortus"
npc_texture = ExtResource( 8 )
trigger_talk = false
move_random = false
sitting = true

[node name="NPC7" type="KinematicBody2D" parent="YSort"]
position = Vector2( 546.859, 179.497 )
script = ExtResource( 14 )
npc_name = "LeMarr"
npc_texture = ExtResource( 11 )
trigger_talk = false
move_random = false
direction = "left"

[node name="Popup" type="Label" parent="YSort/NPC7"]
margin_left = -46.0
margin_top = -42.0
margin_right = 52.0
margin_bottom = -28.0
custom_fonts/font = SubResource( 1 )
text = "Press [E] to talk"
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="Sprite" type="Sprite" parent="YSort/NPC7"]
scale = Vector2( 1.2, 1.3 )
texture = ExtResource( 6 )
hframes = 15
frame = 12
__meta__ = {
"_edit_lock_": true
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="YSort/NPC7"]
method_call_mode = 1
anims/Sitting = SubResource( 2 )
anims/idle_down = SubResource( 3 )
anims/idle_left = SubResource( 4 )
anims/idle_right = SubResource( 5 )
anims/idle_up = SubResource( 6 )
anims/move_down = SubResource( 7 )
anims/move_left = SubResource( 8 )
anims/move_right = SubResource( 9 )
anims/move_up = SubResource( 10 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="YSort/NPC7"]
position = Vector2( -0.473321, 11.9358 )
shape = SubResource( 11 )
__meta__ = {
"_edit_lock_": true
}

[node name="Area2D" type="Area2D" parent="YSort/NPC7"]
__meta__ = {
"_edit_lock_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="YSort/NPC7/Area2D"]
shape = SubResource( 12 )
__meta__ = {
"_edit_lock_": true
}

[node name="HUD" type="CanvasLayer" parent="YSort/NPC7"]

[node name="DialogPlayer" parent="YSort/NPC7/HUD" instance=ExtResource( 13 )]

[node name="MoveRandom" type="Timer" parent="YSort/NPC7"]
wait_time = 2.0

[node name="MoveCooldown" type="Timer" parent="YSort/NPC7"]
wait_time = 10.0
one_shot = true

[node name="CustomPath" type="Node" parent="YSort/NPC7"]

[node name="NPC8" parent="YSort" instance=ExtResource( 5 )]
position = Vector2( 549.255, 203.294 )
npc_name = "Isaac"
npc_texture = ExtResource( 15 )
trigger_talk = false
move_random = false
direction = "left"

[node name="NPC" type="KinematicBody2D" parent="YSort"]
position = Vector2( 525.835, 163.25 )
scale = Vector2( 1.3, 1.4 )
script = ExtResource( 14 )
npc_name = "Ed"
npc_texture = ExtResource( 4 )
trigger_talk = false
move_random = false
sitting = true
direction = "sit_left"

[node name="Popup" type="Label" parent="YSort/NPC"]
margin_left = -46.0
margin_top = -42.0
margin_right = 52.0
margin_bottom = -28.0
custom_fonts/font = SubResource( 13 )
text = "Press [E] to talk"
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="Sprite" type="Sprite" parent="YSort/NPC"]
texture = ExtResource( 4 )
hframes = 15
frame = 12
__meta__ = {
"_edit_lock_": true
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="YSort/NPC"]
anims/idle_down = SubResource( 14 )
anims/idle_left = SubResource( 15 )
anims/idle_right = SubResource( 16 )
anims/idle_up = SubResource( 17 )
anims/move_down = SubResource( 18 )
anims/move_left = SubResource( 19 )
anims/move_right = SubResource( 20 )
anims/move_up = SubResource( 21 )
anims/sit_left = SubResource( 22 )
anims/sit_right = SubResource( 23 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="YSort/NPC"]
position = Vector2( 0.10941, 7.99341 )
shape = SubResource( 24 )

[node name="Area2D" type="Area2D" parent="YSort/NPC"]
__meta__ = {
"_edit_lock_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="YSort/NPC/Area2D"]
position = Vector2( -0.541107, 0 )
shape = SubResource( 25 )
__meta__ = {
"_edit_lock_": true
}

[node name="HUD" type="CanvasLayer" parent="YSort/NPC"]

[node name="DialogPlayer" parent="YSort/NPC/HUD" instance=ExtResource( 13 )]

[node name="MoveRandom" type="Timer" parent="YSort/NPC"]
wait_time = 2.0

[node name="MoveCooldown" type="Timer" parent="YSort/NPC"]
wait_time = 10.0
one_shot = true

[node name="CustomPath" type="Node" parent="YSort/NPC"]

[node name="NPC5" parent="YSort" instance=ExtResource( 5 )]
position = Vector2( 478.094, 140.699 )
npc_name = "Talla"
npc_texture = ExtResource( 9 )
trigger_talk = false
move_random = false
sitting = true

[node name="NPC6" parent="YSort" instance=ExtResource( 5 )]
position = Vector2( 449.783, 140.211 )
npc_name = "Gordon"
npc_texture = ExtResource( 10 )
trigger_talk = false
move_random = false
sitting = true

[node name="Player" parent="YSort" instance=ExtResource( 2 )]
position = Vector2( 526.74, 118.49 )

[node name="Portal" type="Area2D" parent="."]
position = Vector2( 561.046, 142.869 )
collision_layer = 2
script = ExtResource( 16 )
next_scene_path = "res://Deck A1.tscn"
player_spawn_location = Vector2( 277, 170.7 )
player_direction = "right"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Portal"]
shape = SubResource( 26 )
__meta__ = {
"_edit_lock_": true
}

[node name="Position2D" type="Position2D" parent="."]
position = Vector2( 546.61, 147.751 )

[node name="StaticBody2D" type="StaticBody2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PoolVector2Array( 345.285, 103.019, 558.399, 103.946, 558.642, 126.877, 564.223, 126.877, 563.15, 158, 559.501, 159.073, 559.326, 236.448, 342.042, 237.374, 342.042, 219.306, 352.234, 219.306, 348.384, 176.536, 341.578, 174.83, 342.072, 127.071, 319.075, 125.816, 318.414, 261.465, 622.334, 260.539, 592.683, 28.8927, 302.199, 35.8421, 315.634, 92.827 )

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PoolVector2Array( 461.642, 146.484, 521.337, 148.149, 521.575, 190.958, 425.73, 194.287, 424.303, 207.844, 416.455, 207.844, 412.65, 193.574, 396.24, 193.098, 394.575, 206.654, 386.013, 206.892, 382.446, 193.336, 374.122, 192.623, 374.598, 177.64, 368.412, 174.691, 366.567, 163.624, 375.073, 162.894, 374.598, 147.673, 382.208, 147.435, 384.586, 132.928, 395.764, 133.166, 396.478, 147.435, 413.601, 147.198, 415.028, 132.69, 425.017, 132.452, 425.968, 145.057 )

[node name="HUD" type="CanvasLayer" parent="."]

[node name="DialogPlayer" parent="HUD" instance=ExtResource( 13 )]
speakers = [ "Ed", "LeMarr", "Ed", "LeMarr", "Gordon", "Kelly", "Talla", "LeMarr", "Ed", "Isaac", "Gordon", "Isaac", "Isaac", "%p", "Ed", "Ed" ]
dialogs = [ "Okay now that we’re all here, LeMarr, Isaac, what new findings do you have? ", "At first, I tried to relay our current data to the spatial anomaly we encountered a  while back, remember that doorway that lead to a pocket of 2D space?", "Yes?", "Well, it’s nothing like that. ", "That’s reassuring. ", "Something odd we discovered during our away mission is that no one else seemed to notice anything different? ", "Meaning this must have only happened to us. ", "Interesting. And we know that we are still in the same universe because the events that had happened previously, have still happened to everyone else. Like Tomolen reminding us that we had saved them from a collision course with that star. ", "So, if this is not the same as the 2D universe, where are we?", "It is my conjecture that we are still located in the same universe, however we are operating on a different layer of reality. ", "Yeah, you’re going to have to elaborate on that. ", "Our reality consists of a multitude of different layers, all equally real aspects of the one reality. A piano may be perceived on one layer as being ‘white’, yet the molecules and atoms have different colour-properties then the ‘white’ we perceive on a higher layer of experience. ", "The colour-properties of atomistic particles may indeed absorb blue and therefore have a colour-property of blue. Yet ordinary life forms experience the piano, on a different layer, as being white. ", "So, we are in a layer of reality that just happens to be, pixelated?", "Okay, I think I can see what you’re driving at. ", "Alright, I don’t know about you guys but I could sure use a drink. Isn’t it karaoke night in the Mess Hall?" ]

[node name="Timer" type="Timer" parent="."]
wait_time = 5.0
one_shot = true
autostart = true

[node name="SitTrigger" parent="." instance=ExtResource( 31 )]
position = Vector2( 507.516, 164.968 )

[node name="CollisionShape2D" parent="SitTrigger" index="0"]
position = Vector2( 0, -15.908 )
[connection signal="body_entered" from="YSort/NPC7/Area2D" to="YSort/NPC7" method="player_around"]
[connection signal="body_exited" from="YSort/NPC7/Area2D" to="YSort/NPC7" method="player_not_around"]
[connection signal="stopped" from="YSort/NPC7/HUD/DialogPlayer" to="YSort/NPC7" method="dialog_player_stopped"]
[connection signal="timeout" from="YSort/NPC7/MoveRandom" to="YSort/NPC7" method="_on_MoveRandom_timeout"]
[connection signal="animation_finished" from="YSort/NPC/AnimationPlayer" to="YSort/NPC" method="_on_AnimationPlayer_animation_finished"]
[connection signal="body_entered" from="YSort/NPC/Area2D" to="YSort/NPC" method="player_around"]
[connection signal="body_exited" from="YSort/NPC/Area2D" to="YSort/NPC" method="player_not_around"]
[connection signal="stopped" from="YSort/NPC/HUD/DialogPlayer" to="YSort/NPC" method="dialog_player_stopped"]
[connection signal="timeout" from="YSort/NPC/MoveRandom" to="YSort/NPC" method="_on_MoveRandom_timeout"]
[connection signal="body_entered" from="Portal" to="Portal" method="_on_Portal_body_entered"]
[connection signal="stopped" from="HUD/DialogPlayer" to="." method="_on_DialogPlayer_stopped"]
[connection signal="timeout" from="Timer" to="." method="_on_Timer_timeout"]

[editable path="SitTrigger"]
