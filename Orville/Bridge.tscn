[gd_scene load_steps=27 format=2]

[ext_resource path="res://Sets/Bridge.png" type="Texture" id=1]
[ext_resource path="res://Character/Player.tscn" type="PackedScene" id=2]
[ext_resource path="res://BridgeBottomLeftConsole.tscn" type="PackedScene" id=3]
[ext_resource path="res://BridgeChair2.tscn" type="PackedScene" id=4]
[ext_resource path="res://BridgeChair.tscn" type="PackedScene" id=5]
[ext_resource path="res://BridgeConsoleRight.tscn" type="PackedScene" id=6]
[ext_resource path="res://BridgeMiddleConsole.tscn" type="PackedScene" id=7]
[ext_resource path="res://BridgeTopLeftConsole.tscn" type="PackedScene" id=8]
[ext_resource path="res://Src/DialogPlayer/DialogPlayer.tscn" type="PackedScene" id=9]
[ext_resource path="res://Assets/AllCharacters/Characters/GordonMalloy.png" type="Texture" id=10]
[ext_resource path="res://Bridge.gd" type="Script" id=11]
[ext_resource path="res://Portal.tscn" type="PackedScene" id=12]
[ext_resource path="res://Src/NPC/NPC.gd" type="Script" id=13]
[ext_resource path="res://Assets/AllCharacters/Characters/EdMercer.png" type="Texture" id=14]
[ext_resource path="res://Assets/Fonts/Squada_One/SquadaOne-Regular.ttf" type="DynamicFontData" id=15]

[sub_resource type="DynamicFont" id=1]
outline_size = 1
outline_color = Color( 0, 0, 0, 1 )
font_data = ExtResource( 15 )

[sub_resource type="Animation" id=2]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 0 ]
}

[sub_resource type="Animation" id=3]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 11 ]
}

[sub_resource type="Animation" id=4]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 6 ]
}

[sub_resource type="Animation" id=5]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 3 ]
}

[sub_resource type="Animation" id=6]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 1, 2 ]
}

[sub_resource type="Animation" id=7]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 10, 9 ]
}

[sub_resource type="Animation" id=8]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 7, 8 ]
}

[sub_resource type="Animation" id=9]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 4, 5 ]
}

[sub_resource type="RectangleShape2D" id=10]
extents = Vector2( 5.36453, 6.87897 )

[sub_resource type="RectangleShape2D" id=11]
extents = Vector2( 17.1055, 18.4912 )

[node name="Node2D" type="Node2D"]
script = ExtResource( 11 )

[node name="StaticBody2D" type="StaticBody2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PoolVector2Array( 15.9122, 102.145, 16.0947, 74.9237, 31.42, 60.9606, 52.1943, 48.0193, 73.6497, 40.8675, 81.8232, 39.1646, 82.8449, 56.1928, 99.5325, 55.5116, 100.895, 37.1213, 110.09, 35.0779, 109.409, 54.1494, 126.096, 53.4683, 127.799, 35.4185, 139.719, 36.0996, 138.357, 53.4683, 153.341, 55.8522, 158.109, 37.8024, 192.165, 50.0626, 213.621, 66.7502, 236.098, 91.9518, 241.547, 116.132, 238.468, 127.68, 234.213, 137.193, 220.193, 157.22, 202.92, 171.74, 176.633, 185.259, 157.107, 191.768, 156.355, 189.265, 156.066, 181.52, 139.038, 179.817, 138.581, 193.52, 126.815, 194.021, 125.415, 180.839, 110.431, 181.179, 110.042, 193.52, 101.029, 192.269, 100.214, 180.498, 84.5479, 179.136, 83.5053, 188.013, 58.2205, 177.749, 34.4378, 164.48, 19.1668, 150.211, 16.1626, 136.192, -3.99829, 136.906, -9.78784, 174.368, 32.4419, 198.888, 220.432, 229.198, 270.835, 144.739, 269.473, -16.6875, 53.5566, -21.1149, 6.89961, 24.1799, -21.0265, 40.1863, -20.6859, 99.7847 )

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PoolVector2Array( -1.86217, 100.392, -1.61182, 139.696, -30.6518, 139.196, -29.1497, 99.6412 )

[node name="Sprite" type="Sprite" parent="."]
position = Vector2( -143.923, 270.049 )
texture = ExtResource( 1 )

[node name="YSort" type="YSort" parent="."]

[node name="Player" parent="YSort" instance=ExtResource( 2 )]
position = Vector2( 49.8335, 129.82 )

[node name="StaticBody2D" parent="YSort" instance=ExtResource( 3 )]
position = Vector2( 79.0942, 143.53 )

[node name="StaticBody2D2" parent="YSort" instance=ExtResource( 4 )]
position = Vector2( 201.539, 113.58 )

[node name="StaticBody2D3" parent="YSort" instance=ExtResource( 4 )]
position = Vector2( 201.68, 132.606 )

[node name="StaticBody2D4" parent="YSort" instance=ExtResource( 5 )]
position = Vector2( 111.256, 144.069 )

[node name="StaticBody2D5" parent="YSort" instance=ExtResource( 5 )]
position = Vector2( 111.073, 101 )

[node name="StaticBody2D6" parent="YSort" instance=ExtResource( 6 )]
position = Vector2( 211.68, 124.108 )

[node name="StaticBody2D7" parent="YSort" instance=ExtResource( 7 )]
position = Vector2( 115.556, 126.685 )

[node name="StaticBody2D8" parent="YSort" instance=ExtResource( 8 )]
position = Vector2( 81.4963, 105.161 )

[node name="NPCTest" type="KinematicBody2D" parent="YSort"]
position = Vector2( 184.094, 99.5855 )
scale = Vector2( 1.15, 1.15 )
script = ExtResource( 13 )
npc_name = "Gordon"
npc_texture = ExtResource( 10 )
dialogs = [ "Oh hey %p, how are you enjoying your stay so far?", "It's been amazing, except for the... you know...", "Pixel universe? I think it's pretty sweet actually! Except the quantum drive seems to be offline...", "Yes, LeMarr asked me to report to you. He just downgraded the engine and asked if you could test it? ", "No problem! Let's take this baby for a test drive. " ]
speakers_dialogs = [ "Gordon", "You", "Gordon", "You", "Gordon" ]

[node name="Popup" type="Label" parent="YSort/NPCTest"]
margin_left = -46.0
margin_top = -42.0
margin_right = 52.0
margin_bottom = -28.0
custom_fonts/font = SubResource( 1 )
text = "Press [E] to talk"
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="Sprite" type="Sprite" parent="YSort/NPCTest"]
texture = ExtResource( 14 )
hframes = 13
__meta__ = {
"_edit_lock_": true
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="YSort/NPCTest"]
anims/idle_down = SubResource( 2 )
anims/idle_left = SubResource( 3 )
anims/idle_right = SubResource( 4 )
anims/idle_up = SubResource( 5 )
anims/move_down = SubResource( 6 )
anims/move_left = SubResource( 7 )
anims/move_right = SubResource( 8 )
anims/move_up = SubResource( 9 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="YSort/NPCTest"]
position = Vector2( -0.175, 8.356 )
shape = SubResource( 10 )
__meta__ = {
"_edit_lock_": true
}

[node name="Area2D" type="Area2D" parent="YSort/NPCTest"]
__meta__ = {
"_edit_lock_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="YSort/NPCTest/Area2D"]
shape = SubResource( 11 )
__meta__ = {
"_edit_lock_": true
}

[node name="HUD" type="CanvasLayer" parent="YSort/NPCTest"]

[node name="DialogPlayer" parent="YSort/NPCTest/HUD" instance=ExtResource( 9 )]

[node name="MoveRandom" type="Timer" parent="YSort/NPCTest"]
wait_time = 2.0

[node name="MoveCooldown" type="Timer" parent="YSort/NPCTest"]
wait_time = 10.0
one_shot = true

[node name="CustomPath" type="Node" parent="YSort/NPCTest"]

[node name="Portal" parent="." instance=ExtResource( 12 )]
position = Vector2( -5.73577, 121.168 )
next_scene_path = "res://Deck A.tscn"
player_spawn_location = Vector2( 433.4, 91.6 )
[connection signal="body_entered" from="YSort/NPCTest/Area2D" to="YSort/NPCTest" method="player_around"]
[connection signal="body_exited" from="YSort/NPCTest/Area2D" to="YSort/NPCTest" method="player_not_around"]
[connection signal="stopped" from="YSort/NPCTest/HUD/DialogPlayer" to="YSort/NPCTest" method="dialog_player_stopped"]
[connection signal="stopped" from="YSort/NPCTest/HUD/DialogPlayer" to="." method="_on_DialogPlayer_stopped"]
[connection signal="timeout" from="YSort/NPCTest/MoveRandom" to="YSort/NPCTest" method="_on_MoveRandom_timeout"]
