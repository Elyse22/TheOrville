[gd_scene load_steps=32 format=2]

[ext_resource path="res://Sets/Bridge.png" type="Texture" id=1]
[ext_resource path="res://Character/Player.tscn" type="PackedScene" id=2]
[ext_resource path="res://BridgeBottomLeftConsole.tscn" type="PackedScene" id=3]
[ext_resource path="res://BridgeChair2.tscn" type="PackedScene" id=4]
[ext_resource path="res://BridgeChair.tscn" type="PackedScene" id=5]
[ext_resource path="res://BridgeConsoleRight.tscn" type="PackedScene" id=6]
[ext_resource path="res://BridgeMiddleConsole.tscn" type="PackedScene" id=7]
[ext_resource path="res://BridgeTopLeftConsole.tscn" type="PackedScene" id=8]
[ext_resource path="res://Src/DialogPlayer/DialogPlayer.tscn" type="PackedScene" id=9]
[ext_resource path="res://Assets/AllCharacters/Characters/GordonMalloy.png" type="Texture" id=10]
[ext_resource path="res://Bridge2.gd" type="Script" id=11]
[ext_resource path="res://Portal.tscn" type="PackedScene" id=12]
[ext_resource path="res://Src/NPC/NPC.gd" type="Script" id=13]
[ext_resource path="res://Assets/AllCharacters/Characters/EdMercer.png" type="Texture" id=14]
[ext_resource path="res://Assets/Fonts/Squada_One/SquadaOne-Regular.ttf" type="DynamicFontData" id=15]
[ext_resource path="res://Src/NPC/NPC.tscn" type="PackedScene" id=16]
[ext_resource path="res://Assets/AllCharacters/Characters/Kelly.png" type="Texture" id=17]
[ext_resource path="res://Assets/AllCharacters/Characters/Isaac.png" type="Texture" id=18]
[ext_resource path="res://Assets/AllCharacters/Characters/TallaKeyali.png" type="Texture" id=19]

[sub_resource type="DynamicFont" id=1]
outline_size = 1
outline_color = Color( 0, 0, 0, 1 )
font_data = ExtResource( 15 )

[sub_resource type="Animation" id=2]
resource_name = "Sitting"
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 12 ]
}

[sub_resource type="Animation" id=3]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 0 ]
}

[sub_resource type="Animation" id=4]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 11 ]
}

[sub_resource type="Animation" id=5]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 6 ]
}

[sub_resource type="Animation" id=6]
length = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 3 ]
}

[sub_resource type="Animation" id=7]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 1, 2 ]
}

[sub_resource type="Animation" id=8]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 10, 9 ]
}

[sub_resource type="Animation" id=9]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 7, 8 ]
}

[sub_resource type="Animation" id=10]
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 4, 5 ]
}

[sub_resource type="RectangleShape2D" id=11]
extents = Vector2( 5.36453, 6.87897 )

[sub_resource type="RectangleShape2D" id=12]
extents = Vector2( 17.1055, 18.4912 )

[node name="Node2D" type="Node2D"]
script = ExtResource( 11 )
__meta__ = {
"_edit_horizontal_guides_": [  ]
}

[node name="StaticBody2D" type="StaticBody2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PoolVector2Array( 15.9122, 102.145, 16.0947, 74.9237, 31.42, 60.9606, 52.1943, 48.0193, 73.6497, 40.8675, 81.8232, 39.1646, 82.8449, 56.1928, 99.5325, 55.5116, 100.895, 37.1213, 110.09, 35.0779, 109.409, 54.1494, 126.096, 53.4683, 127.799, 35.4185, 139.719, 36.0996, 138.357, 53.4683, 153.341, 55.8522, 158.109, 37.8024, 192.165, 50.0626, 213.621, 66.7502, 236.098, 91.9518, 241.547, 116.132, 238.468, 127.68, 234.213, 137.193, 220.193, 157.22, 202.92, 171.74, 176.633, 185.259, 157.107, 191.768, 156.355, 189.265, 155.604, 183.999, 138.916, 183.318, 138.581, 193.52, 126.815, 194.021, 125.975, 185.021, 110.99, 184.68, 110.042, 193.52, 101.029, 192.269, 98.3892, 183.658, 85.7884, 183.318, 84.4262, 190.47, 57.5218, 180.934, 34.4378, 164.48, 19.1668, 150.211, 16.1626, 136.192, -3.99829, 136.906, -9.78784, 174.368, 32.4419, 198.888, 220.432, 229.198, 270.835, 144.739, 269.473, -16.6875, 53.5566, -21.1149, 6.89961, 24.1799, -21.0265, 40.1863, -20.6859, 99.7847 )

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="StaticBody2D"]
polygon = PoolVector2Array( -1.86217, 100.392, -1.61182, 139.696, -30.6518, 139.196, -29.1497, 99.6412 )

[node name="Sprite" type="Sprite" parent="."]
position = Vector2( -143.582, 269.505 )
scale = Vector2( 1.05, 1.05 )
texture = ExtResource( 1 )

[node name="YSort" type="YSort" parent="."]

[node name="Player" parent="YSort" instance=ExtResource( 2 )]
position = Vector2( 156.794, 88.6342 )

[node name="NPCTest" type="KinematicBody2D" parent="YSort"]
position = Vector2( 193.576, 96.2265 )
scale = Vector2( 1.15, 1.15 )
script = ExtResource( 13 )
npc_name = "Gordon"
npc_texture = ExtResource( 10 )
dialogs = [ "Oh hey _________, how are you enjoying your stay so far?", "YOU: It's been amazing, except for the... you know...", "Pixel universe? I think it's pretty sweet actually! Except the quantum drive seems to be offline...", "YOU: Yes, LeMarr asked me to report to you. He just downgraded the engine and asked if you could test it? ", "No problem! Let's take this baby for a test drive. " ]
trigger_talk = false
move_random = false
sitting = true

[node name="Popup" type="Label" parent="YSort/NPCTest"]
margin_left = -46.0
margin_top = -42.0
margin_right = 52.0
margin_bottom = -28.0
custom_fonts/font = SubResource( 1 )
text = "Press [E] to talk"
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="Sprite" type="Sprite" parent="YSort/NPCTest"]
scale = Vector2( 1, 1.1 )
texture = ExtResource( 14 )
hframes = 13
frame = 12
__meta__ = {
"_edit_lock_": true
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="YSort/NPCTest"]
anims/Sitting = SubResource( 2 )
anims/idle_down = SubResource( 3 )
anims/idle_left = SubResource( 4 )
anims/idle_right = SubResource( 5 )
anims/idle_up = SubResource( 6 )
anims/move_down = SubResource( 7 )
anims/move_left = SubResource( 8 )
anims/move_right = SubResource( 9 )
anims/move_up = SubResource( 10 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="YSort/NPCTest"]
position = Vector2( -0.175, 8.356 )
shape = SubResource( 11 )
__meta__ = {
"_edit_lock_": true
}

[node name="Area2D" type="Area2D" parent="YSort/NPCTest"]
__meta__ = {
"_edit_lock_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="YSort/NPCTest/Area2D"]
shape = SubResource( 12 )
__meta__ = {
"_edit_lock_": true
}

[node name="HUD" type="CanvasLayer" parent="YSort/NPCTest"]

[node name="DialogPlayer" parent="YSort/NPCTest/HUD" instance=ExtResource( 9 )]
speakers = [ "", "" ]
dialogs = [ "", "" ]

[node name="MoveRandom" type="Timer" parent="YSort/NPCTest"]
wait_time = 2.0

[node name="MoveCooldown" type="Timer" parent="YSort/NPCTest"]
wait_time = 10.0
one_shot = true

[node name="CustomPath" type="Node" parent="YSort/NPCTest"]

[node name="StaticBody2D" parent="YSort" instance=ExtResource( 3 )]
position = Vector2( 90.6357, 136.635 )

[node name="StaticBody2D2" parent="YSort" instance=ExtResource( 4 )]
position = Vector2( 219.309, 105.218 )

[node name="StaticBody2D3" parent="YSort" instance=ExtResource( 4 )]
position = Vector2( 219.427, 125.142 )

[node name="StaticBody2D4" parent="YSort" instance=ExtResource( 5 )]
position = Vector2( 124.75, 137.258 )

[node name="StaticBody2D5" parent="YSort" instance=ExtResource( 5 )]
position = Vector2( 124.381, 91.9852 )

[node name="StaticBody2D6" parent="YSort" instance=ExtResource( 6 )]
position = Vector2( 229.899, 116.195 )

[node name="StaticBody2D7" parent="YSort" instance=ExtResource( 7 )]
position = Vector2( 128.649, 119.173 )

[node name="StaticBody2D8" parent="YSort" instance=ExtResource( 8 )]
position = Vector2( 93.3376, 96.1676 )

[node name="Portal" parent="." instance=ExtResource( 12 )]
position = Vector2( -5.73577, 121.168 )
next_scene_path = "res://Deck A.tscn"
player_spawn_location = Vector2( 433.4, 91.6 )

[node name="NPC" parent="." instance=ExtResource( 16 )]
position = Vector2( 25.3608, 127.335 )
npc_name = "Ed"
npc_texture = ExtResource( 14 )
move_random = false

[node name="DialogPlayer" parent="NPC/HUD" index="0"]
speakers = [ "", "" ]
dialogs = [ "", "" ]

[node name="Node2D" type="Node2D" parent="NPC/CustomPath" index="0"]
position = Vector2( 18.0452, 118.394 )

[node name="Node2D2" type="Node2D" parent="NPC/CustomPath" index="1"]
position = Vector2( 64.3583, 158.9 )

[node name="Node2D3" type="Node2D" parent="NPC/CustomPath" index="2"]
position = Vector2( 119.033, 165.889 )

[node name="Node2D4" type="Node2D" parent="NPC/CustomPath" index="3"]
position = Vector2( 143.767, 134.726 )

[node name="HUD" type="CanvasLayer" parent="."]

[node name="DialogPlayer" parent="HUD" instance=ExtResource( 9 )]
speakers = [ "Computer", "Ed", "Tomolen", "Tomolen", "Ed", "Computer", "Ed", "Tomolen", "Ed", "Tomolen", "Computer", "Ed", "Kelly", "Ed", "Gordon", "Isaac", "Gordon", "Isaac", "Ed", "Gordon" ]
dialogs = [ "Alert. Alert. Urgent distress signal detected. ", "Computer, replay distress signal. ", "Captain Mercer? Are you out there? It’s me, Tomolen, from Star Ship J-2837. You helped us regain control over our ship, remember? We were drifting into a star and you opened up they sky for us!", "Please answer my call, our engines have stopped working and we’re drifting again!  ", "Computer, see if you can hail Tomolen on StarShip J2837. ", "*Connection Beep*", "This is Captain Ed Mercer from Starship Vessel U.S.S Orville. Tomolen, are you there?", "Captain Mercer? Thank Dorahl!", "We got your distress signal. Send your coordinates and we’ll be right there. ", "Sending now! Hurry Captain, I think we’re on another collision course, headed directly into a nebula!", "Communication Terminated.", "A nearby nebula? ", "I heard it too. I guess they are still trying to figure out this whole space thing. ", "Gordon, did you receive their position?", "Sure did, 257 mark 752. Hey, that’s a palindrome! ", "Correction, a palindrome is a word, phrase, number or sequence of words that reads the same backward as forward. 257 mark 752 is not a palindrome, due to the word ‘mark’ located in between the position.  ", "Way to kill the fun.  ", "I was not aware of having caused any harm to 'fun'. ", "Gordon, set a course for Star Ship J-2837. ", "Yes sir. " ]

[node name="NPC2" parent="." instance=ExtResource( 16 )]
position = Vector2( 18.8656, 92.1772 )
npc_name = "Kelly"
npc_texture = ExtResource( 17 )
move_random = false

[node name="DialogPlayer" parent="NPC2/HUD" index="0"]
speakers = [ "", "", "" ]
dialogs = [ "", "" ]

[node name="Node2D" type="Node2D" parent="NPC2/CustomPath" index="0"]
position = Vector2( 64.169, 73.8798 )

[node name="Node2D2" type="Node2D" parent="NPC2/CustomPath" index="1"]
position = Vector2( 90.5473, 64.8232 )

[node name="Node2D3" type="Node2D" parent="NPC2/CustomPath" index="2"]
position = Vector2( 120.008, 77.4199 )

[node name="NPC3" parent="." instance=ExtResource( 16 )]
position = Vector2( 9.79527, 115.177 )
npc_name = "Isaac"
npc_texture = ExtResource( 18 )
move_random = false

[node name="DialogPlayer" parent="NPC3/HUD" index="0"]
speakers = [ "", "" ]
dialogs = [ "", "" ]

[node name="Node2D" type="Node2D" parent="NPC3/CustomPath" index="0"]
position = Vector2( 80.0239, 169.82 )

[node name="Node2D2" type="Node2D" parent="NPC3/CustomPath" index="1"]
position = Vector2( 140.213, 176.325 )

[node name="NPC4" parent="." instance=ExtResource( 16 )]
position = Vector2( 23.3646, 107.444 )
npc_name = "Talla"
npc_texture = ExtResource( 19 )
move_random = false

[node name="Node2D" type="Node2D" parent="NPC4/CustomPath" index="0"]
position = Vector2( 60.3766, 131.081 )
[connection signal="body_entered" from="YSort/NPCTest/Area2D" to="YSort/NPCTest" method="player_around"]
[connection signal="body_exited" from="YSort/NPCTest/Area2D" to="YSort/NPCTest" method="player_not_around"]
[connection signal="stopped" from="YSort/NPCTest/HUD/DialogPlayer" to="." method="_on_DialogPlayer_stopped"]
[connection signal="stopped" from="YSort/NPCTest/HUD/DialogPlayer" to="YSort/NPCTest" method="dialog_player_stopped"]
[connection signal="timeout" from="YSort/NPCTest/MoveRandom" to="YSort/NPCTest" method="_on_MoveRandom_timeout"]
[connection signal="stopped" from="HUD/DialogPlayer" to="." method="_on_DialogPlayer_stopped"]

[editable path="NPC"]

[editable path="NPC2"]

[editable path="NPC3"]

[editable path="NPC4"]
